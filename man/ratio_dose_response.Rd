% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ratio_dose_response.R
\name{ratio_dose_response}
\alias{ratio_dose_response}
\title{Process and Analyze Raw Dose-Response Ratio Data}
\usage{
ratio_dose_response(
  data,
  control_0perc = NULL,
  control_100perc = NULL,
  split_replicates = TRUE,
  info_table = NULL,
  save_to_excel = NULL,
  verbose = TRUE,
  low_value_threshold = 1000
)
}
\arguments{
\item{data}{Data frame containing \strong{raw dose-response experimental data} with specific
structure typically exported from plate readers. Must have at least 43 rows with
column names in row 9.}

\item{control_0perc}{Character specifying the column name for 0\% control (background control,
typically vehicle-treated samples like DMSO).}

\item{control_100perc}{Character specifying the column name for 100\% control (positive control,
typically maximum inhibition samples).}

\item{split_replicates}{Logical indicating whether to split experimental replicates
into separate columns (default: TRUE).}

\item{info_table}{Data frame with experimental metadata containing at least 4 columns:
log(inhibitor), Plate_Row, Target, and Compound information.}

\item{save_to_excel}{Character string specifying Excel file path for saving processed results
(default: NULL, no saving).}

\item{verbose}{Logical indicating whether to display progress messages}
}
\value{
A list containing the following components:
\itemize{
\item \code{original_ratio_table}: Original calculated ratio table from raw data
\item \code{modified_ratio_table}: Processed and formatted table ready for analysis
\item \code{general_means}: Data frame with general control means across all rows
\item \code{interval_means}: Data frame with target-specific means and quality metrics
\item \code{target_intervals}: List mapping targets to row intervals
}
}
\description{
Processes raw experimental data from dose-response assays to calculate BRET ratios,
perform quality assessment, and prepare data for downstream curve fitting analysis.
This function handles the initial data processing pipeline from raw plate reader
data to analysis-ready formatted data.
}
\details{
This function performs the \strong{initial processing of raw dose-response data} from BRET assays
or similar experimental formats. It transforms raw experimental measurements into analysis-ready
data through the following pipeline:

\strong{Raw Data Processing Pipeline:}
\itemize{
\item \strong{Raw Data Input}: Accepts direct output from plate readers or experimental data systems
\item \strong{Data Extraction}: Separates measurement subtables (typically donor and acceptor channels)
\item \strong{Quality Filtering}: Removes low-intensity signals (<1000) that may represent failed wells
\item \strong{Ratio Calculation}: Computes BRET ratios as (subtable2 / subtable1) * 1000
\item \strong{Control Processing}: Handles control wells separately for normalization
\item \strong{Quality Assessment}: Calculates assay performance metrics (Z-score, Assay Window)
\item \strong{Data Formatting}: Transposes and structures data for downstream analysis
}

\strong{Typical Raw Data Structure:}
The function expects \strong{raw experimental data} in the following format:
\preformatted{
  Rows 1-8:     Instrument headers, plate layout, experimental metadata (ignored)
  Row 9:        Column names (well identifiers or sample names)
  Rows 10-25:   First measurement subtable (e.g., donor channel or timepoint 1)
  Rows 26-27:   Separator or additional headers (ignored)
  Rows 28-43:   Second measurement subtable (e.g., acceptor channel or timepoint 2)
}

\strong{Typical info_table structure:}
\preformatted{
Column 1: log(inhibitor) - Numeric values of inhibitor concentrations in log scale
Column 2: Plate_Row - Row identifiers matching the ratio table (e.g., "A", "B", "C", etc.)
Column 3: Target - Target protein identifiers (e.g., "BRD4", "EGFR", "KRAS")
Column 4: Compound - Compound identifiers (e.g., "JQ1", "Gefitinib", "ARS-1620")
}

\strong{Quality Metrics for Raw Data Assessment:}
\itemize{
\item \strong{Luciferase Signal}: Assesses raw signal intensity from experimental measurements
\item \strong{Z-Score}: Evaluates assay robustness from raw control data variability
\item \strong{Assay Window}: Calculates dynamic range from raw control measurements
\item \strong{Overall Quality}: Determines if raw data quality supports further analysis
}
}
\section{Raw Data Requirements}{

The input data should be \strong{raw experimental measurements} with:
\itemize{
\item \strong{Direct instrument output}: Minimal preprocessing required
\item \strong{Consistent structure}: Fixed row positions for data extraction
\item \strong{Proper controls}: Clearly identified control wells in column names
\item \strong{Metadata alignment}: Info table matching experimental design
}
}

\section{Expected Raw Data Sources}{

\itemize{
\item Plate reader exports (Tecan, BMG Labtech, PerkinElmer)
\item BRET assay raw measurements
\item Luminescence or fluorescence intensity data
\item High-throughput screening raw data
}
}

\examples{
\dontrun{
# Typical workflow starting with raw experimental data
# Load raw data directly from plate reader export
raw_plate_data <- read.csv("plate_reader_export.csv")

# Process raw data with control definitions
processed_data <- ratio_dose_response(
  data = raw_plate_data,  # Raw experimental data
  control_0perc = "DMSO_Ctrl",      # Background control from raw data
  control_100perc = "Stauro_Ctrl",  # Positive control from raw data
  info_table = sample_design,       # Experimental design metadata
  save_to_excel = "processed_data.xlsx"
)

# The output is now ready for curve fitting analysis
analysis_ready_data <- processed_data$modified_ratio_table

# Proceed to dose-response curve fitting
dr_results <- fit_drc_3pl(analysis_ready_data, normalize = TRUE)
}

}
\references{
For raw data processing in dose-response assays:
\itemize{
\item "BRET Assay Development Guide" (PerkinElmer)
\item "High-Throughput Screening Data Analysis" (Inglese et al.)
\item Journal of Biomolecular Screening raw data standards
}
}
\seealso{
\code{\link{fit_drc_3pl}} for the next step in the analysis pipeline
\code{\link{plot_dose_response}} for visualization of processed data
}
